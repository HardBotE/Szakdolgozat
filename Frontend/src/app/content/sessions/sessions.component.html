<div class="sessions-container">
  <ng-container *ngIf="loggedInUser?.role==='coach';else teachings ">
    <h2>Classes to be held</h2>
  </ng-container>

  <ng-template #teachings>
     <h2>My Sessions</h2>
  </ng-template>

  <p>You have <strong>{{ sessions.length }}</strong> session{{ sessions.length !== 1 ? 's' : '' }}.</p>

  <div *ngFor="let session of sessions" class="session-card" [ngClass]="{
        'success_session-card': session.status === 'paid',
        'pending_session-card': session.status === 'pending',
        'canceled_session-card':session.status==='canceled'
      }">
    <ng-container *ngIf="loggedInUser?.role==='client'; ">
      <h3 class="coach-name">Session with {{session.coach_name}}</h3>
    </ng-container>


    <div class="session-details">
      <p><strong>Day:</strong> {{ session.date.day }}</p>
      <p><strong>Start Time:</strong> {{formatTime(session.date.startTime.toString()) }}</p>
      <p><strong>End Time:</strong> {{ formatTime(session.date.endTime.toString()) }}</p>
      <p>
        <ng-container *ngIf="session.session_location?.startsWith('http'); else plainText">
          <a [href]="session.session_location" target="_blank">{{ session.session_location }}</a>
        </ng-container>

        <ng-template #plainText>
          <div>{{ session.session_location }}</div>
        </ng-template>
      </p>
    </div>

    <div class="session-status" [ngClass]="{
        'confirmed': session.status === 'paid',
        'pending': session.status === 'pending',
        'canceled':session.status==='canceled'
      }">
      {{ session.status | uppercase }}
    </div>

    <div *ngIf="session.status === 'pending'" class="session-cancel">
      <button class="btn-cancel" (click)="cancelSession(session._id)">Cancel session</button>
    </div>

    <div *ngIf="session.status === 'pending'" class="session-pay">
      <button class="btn-pay" (click)="startPay(session._id)">Pay for the session</button>
    </div>
  </div>

  <div *ngIf="sessions.length === 0" class="no-sessions">
    <p>No upcoming sessions available.</p>
  </div>
</div>
